"use strict";(self.webpackChunkmovie_db=self.webpackChunkmovie_db||[]).push([[212],{886:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var n=r(8683),a=r(907);var i=r(181);function o(e){return function(e){if(Array.isArray(e))return(0,a.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=r(5861),c=r(885),u=r(7757),l=r.n(u),p=r(2791),d=r(7446),m=r(4569),h=r.n(m),f=r(2058),v="WatchList_title__Vcsgn",_="WatchList_oneElement__JBH0-",y="WatchList_card_holder__75rbE",g="WatchList_button__9lBcw",b=r(6030),x=r(5199),k=r(577),w=(r(5462),r(184)),j=function(){var e=(0,b.I0)(),t=(0,p.useState)([]),r=(0,c.Z)(t,2),a=r[0],i=r[1];(0,p.useEffect)((function(){JSON.parse(localStorage.getItem("movie")).map((function(e){var t="https://delightful-deer-peplum.cyclic.app/api/search_"+e.media_type+"/"+e.movie_id,r=function(){var r=(0,s.Z)(l().mark((function r(){var a;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h().get(t);case 3:a=r.sent,i((function(t){return[].concat(o(t),[(0,n.Z)((0,n.Z)({},a.data),{},{media_type:e.media_type,movie_id:e.movie_id})])})),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}();return r()}))}),[]);var u=function(t){var r=JSON.parse(t.target.value),n={id:r.id,type:r.media_type},a=function(){var t=(0,s.Z)(l().mark((function t(){var r,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),t.prev=1,t.next=4,h().post("https://delightful-deer-peplum.cyclic.app/api/remove",n,{headers:{Authorization:"Bearer ".concat(r)}});case 4:a=t.sent,e((0,x.I8)(a.data.movie)),k.Am.success(a.data.message,{position:"top-right",autoClose:500,hideProgressBar:!1,closeOnClick:!0,draggable:!0,progress:void 0}),setTimeout((function(){window.location.reload(!1)}),1e3),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),k.Am.error("Error while sending data",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();a()};return(0,w.jsxs)(p.Fragment,{children:[(0,w.jsx)(d.Z,{}),(0,w.jsx)("h1",{className:v,children:"My WatchList"}),(0,w.jsx)("div",{className:y,children:a.map((function(e){return(0,w.jsxs)("div",{className:_,children:[(0,w.jsx)(f.Z,{item:e,type:e.media_type}),(0,w.jsx)("button",{value:JSON.stringify({media_type:e.media_type,id:e.id}),onClick:u,className:g,children:"Remove From WatchList"})]},e.id)}))}),(0,w.jsx)(k.Ix,{})]})}}}]);
//# sourceMappingURL=212.ea1ebfd1.chunk.js.map